<!------ Include the above in your HEAD tag ---------->
{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Project Management </title>
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&family=PT+Sans:wght@700&display=swap"
        rel="stylesheet">
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{% static 'css/bootstrap.mi.css' %}" rel="stylesheet" />
    <link href="{% static 'css/results.css' %}" rel="stylesheet" />
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="{% static 'js/BinPacking.min.js' %}"></script>
</head>


<body class="container register">
    <div class="row">
        <div class="col-md-3 register-left">
            <img src="https://image.ibb.co/n7oTvU/logo_white.png" alt="" />
            <h3>Here are the Results!</h3>

            <p>The results on the right are the most optimal path for this project. <br>
                <br> Click the Graph button to see a visual representation of your results. Or click home to try
                different inputs
            </p>

        </div>
        <div class="col-md-9 register-right">

            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <h3 class="register-heading">Final Results:</h3>
                    <div class="row register-form">

                        <!-- <div class="explain"> -->
                        <!-- <span style="display:inline-block;"></span> -->
                        <canvas class="explain" id="explain-canvas"></canvas>
                        <!-- </div> -->



                    </div>
                    <!--This will take you to the Graph html so change the href-->
                    <a href="results.html">
                        <input type="button" style="float:right " class="btnRegister" value="Graph" />
                    </a>
                    <!--Takes u to the previous page using history. 
                                    For Graph might want to make -1 into -2 to go back to home page and -1 to go back to results-->
                    <form>
                        <input type="button" style="float:right" onClick="history.go(-1)" class="btnRegister"
                            value="Home" />
                    </form>



                </div>

            </div>
        </div>
    </div>
    <script>

        function getRandomColor() {
            var letters = '0123456789ABCDEF';
            var color = '#';
            for (var i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }
        const BinPacking2D = BinPacking.BP2D;
        const { Bin, Box, Packer } = BinPacking2D;

        let bin_1 = new Bin(300, 300);
        let boxes = [
            new Box(15, 10), // Should be added last (smaller)
            new Box(90, 45), // Fits in bin_2 better than in bin_1
            new Box(40, 80),
            new Box(49, 20), // Too large to fit
        ];
        let packer = new Packer([bin_1]);
        let packed_boxes = packer.pack(boxes);


        ///draw data on canvas

        //[{"width":50,"height":45,"constrainRotation":false,"x":0,"y":0,"packed":true},
        //{"width":40,"height":40,"constrainRotation":false,"x":50,"y":0,"packed":true},
        //{"width":15,"height":10,"constrainRotation":false,"x":50,"y":40,"packed":true}]
        var c = document.getElementById("explain-canvas");
        var ctx = c.getContext("2d");
        for (p in packed_boxes) {
            packed_box = packed_boxes[p];
            ctx.fillStyle = getRandomColor();
            ctx.fillRect(packed_box.x, packed_box.y, packed_box.width, packed_box.height);
        }
        console.log(JSON.stringify(packed_boxes));

    </script>

    <script>

      


    </script>
</body>